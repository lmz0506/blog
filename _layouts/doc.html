---
layout: default
---

<div class="doc-wrapper">
  <!-- å·¦ä¾§ç›¸é‚»æ–‡ç« å¯¼èˆª - ä»…æ¡Œé¢ç«¯æ˜¾ç¤º -->
  <aside class="doc-neighbors desktop-only">
    <div class="neighbors-sticky">
      <h3>ç›¸é‚»æ–‡ç« </h3>
      <div class="neighbors-list">
        {% assign all_docs = site.docs | sort: 'date' | reverse %}
        {% assign current_index = nil %}
        {% for doc in all_docs %}
          {% if doc.url == page.url %}
            {% assign current_index = forloop.index0 %}
            {% break %}
          {% endif %}
        {% endfor %}

        {% if current_index %}
          <!-- ä¸Šä¸€ç¯‡ -->
          {% assign prev_index = current_index | minus: 1 %}
          {% if prev_index >= 0 %}
            {% assign prev_doc = all_docs[prev_index] %}
            <div class="neighbor-item prev">
              <div class="neighbor-label">â† ä¸Šä¸€ç¯‡</div>
              <a href="{{ prev_doc.url | relative_url }}" class="neighbor-link">
                <div class="neighbor-title">{{ prev_doc.title }}</div>
                <div class="neighbor-meta">
                  <span>{{ prev_doc.category }}</span>
                  <span>{{ prev_doc.date | date: "%Y-%m-%d" }}</span>
                </div>
              </a>
            </div>
          {% endif %}

          <!-- å½“å‰æ–‡ç«  -->
          <div class="neighbor-item current">
            <div class="neighbor-label">â€¢ å½“å‰</div>
            <div class="neighbor-current">
              <div class="neighbor-title">{{ page.title }}</div>
              <div class="neighbor-meta">
                <span>{{ page.category }}</span>
                <span>{{ page.date | date: "%Y-%m-%d" }}</span>
              </div>
            </div>
          </div>

          <!-- ä¸‹ä¸€ç¯‡ -->
          {% assign next_index = current_index | plus: 1 %}
          {% if next_index < all_docs.size %}
            {% assign next_doc = all_docs[next_index] %}
            <div class="neighbor-item next">
              <div class="neighbor-label">ä¸‹ä¸€ç¯‡ â†’</div>
              <a href="{{ next_doc.url | relative_url }}" class="neighbor-link">
                <div class="neighbor-title">{{ next_doc.title }}</div>
                <div class="neighbor-meta">
                  <span>{{ next_doc.category }}</span>
                  <span>{{ next_doc.date | date: "%Y-%m-%d" }}</span>
                </div>
              </a>
            </div>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </aside>

  <article class="doc-article">
    <!-- ç§»åŠ¨ç«¯ä¸“å±å¤´éƒ¨ -->
    <div class="mobile-doc-header">
      <div class="mobile-doc-title-row">
        <h1 class="mobile-doc-h1">{{ page.title }}</h1>
        <button class="mobile-articles-toggle" id="mobileArticlesBtn" data-category="{{ page.category }}" style="display: none;">
          <img src="{{ '/assets/images/catalog_32.png' | relative_url }}" alt="æ–‡ç« åˆ—è¡¨">
        </button>
      </div>
      <div class="mobile-doc-meta">
        <span>{{ page.category }}</span>
        <span>{{ page.date | date: "%Y-%m-%d" }}</span>
      </div>
      {% if page.tags %}
      <div class="doc-tags">
        {% for tag in page.tags %}
        <span class="tag" data-tag="{{ tag }}">{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <!-- æ¡Œé¢ç«¯å¤´éƒ¨ï¼ˆä¿æŒåŸæ ·ï¼‰ -->
    <header class="doc-header desktop-only">
      <div class="doc-header-row">
        <h1>{{ page.title }}</h1>
        <!-- MDæºç /æ¸²æŸ“è§†å›¾åˆ‡æ¢æŒ‰é’® -->
        <button id="viewModeBtn" class="view-mode-btn">
          <span class="mode-icon">ğŸª„</span>
        </button>
      </div>
      <div class="doc-meta">
        <span>åˆ†ç±»: {{ page.category }}</span>
        <span>æ›´æ–°: {{ page.date | date: "%Y-%m-%d" }}</span>
      </div>
      {% if page.tags %}
      <div class="doc-tags">
        {% for tag in page.tags %}
        <span class="tag" data-tag="{{ tag }}">{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}
    </header>

    <!-- ç§»åŠ¨ç«¯ç›®å½•æŠ˜å æŒ‰é’® -->
    <div class="mobile-toc-toggle">
      <button id="mobileTocBtn" class="toc-toggle-btn">
        <span class="toc-icon">ğŸ“‘</span>
        <span class="toc-text">ç›®å½•</span>
        <span class="toc-arrow">â–¼</span>
      </button>
      <div id="mobileTocContent" class="mobile-toc-content">
        <nav id="mobileTocNav"></nav>
      </div>
    </div>

    <div class="doc-content" id="docContent">
      {{ content }}
    </div>

    <!-- Markdownæºç è§†å›¾ï¼ˆé»˜è®¤éšè—ï¼‰ -->
    <div class="doc-source" id="docSource" style="display: none;">
      <div style="position: relative;">
        <button id="copyMarkdownBtn" class="copy-markdown-btn" title="å¤åˆ¶å…¨éƒ¨æºç ">
          <span class="copy-icon">ğŸ“‹</span>
          <span class="copy-text">å¤åˆ¶æºç </span>
        </button>
        <pre><code class="language-markdown" id="markdownSource"></code></pre>
      </div>
    </div>
  </article>

  <aside class="doc-toc">
    <div class="toc-sticky" id="tocSticky">
      <h3>ç›®å½•</h3>
      <nav id="tocNav"></nav>
    </div>
  </aside>
</div>

<!-- ç§»åŠ¨ç«¯æ–‡ç« åˆ—è¡¨ä¾§è¾¹æ  -->
<div class="mobile-articles-sidebar" id="mobileArticlesSidebar">
  <div class="mobile-articles-header">
    <h3 id="mobileArticlesCategory"></h3>
    <button class="mobile-articles-close" id="mobileArticlesClose">Ã—</button>
  </div>
  <ul class="mobile-articles-list" id="mobileArticlesList"></ul>
</div>
<div class="mobile-articles-overlay" id="mobileArticlesOverlay"></div>

<!-- ç§»åŠ¨ç«¯æ‚¬æµ®ç›®å½•æŒ‰é’® -->
<button class="mobile-floating-toc-btn" id="mobileFloatingTocBtn">
  <img src="{{ '/assets/images/catalog_2_32.png' | relative_url }}" alt="ç›®å½•">
</button>

<!-- ç§»åŠ¨ç«¯åº•éƒ¨å¼¹å‡ºç›®å½• -->
<div class="mobile-bottom-toc" id="mobileBottomToc">
  <div class="mobile-bottom-toc-header">
    <h3>æ–‡æ¡£ç›®å½•</h3>
    <button class="mobile-bottom-toc-close" id="mobileBottomTocClose">Ã—</button>
  </div>
  <nav id="mobileBottomTocNav" class="mobile-bottom-toc-nav"></nav>
</div>
<div class="mobile-bottom-toc-overlay" id="mobileBottomTocOverlay"></div>

<script>
  // ç”Ÿæˆç›®å½•
  document.addEventListener('DOMContentLoaded', function() {
    const content = document.getElementById('docContent');
    const tocNav = document.getElementById('tocNav');
    const mobileTocNav = document.getElementById('mobileTocNav');
    const mobileTocToggle = document.querySelector('.mobile-toc-toggle');
    const mobileTocBtn = document.getElementById('mobileTocBtn');
    const mobileTocContent = document.getElementById('mobileTocContent');

    if (!content || !tocNav) return;

    // è·å–æ‰€æœ‰æ ‡é¢˜
    const headings = content.querySelectorAll('h2, h3');

    if (headings.length === 0) {
      document.querySelector('.doc-toc').style.display = 'none';
      if (mobileTocToggle) {
        mobileTocToggle.style.display = 'none';
      }
      return;
    }

    // ä¸ºæ¯ä¸ªæ ‡é¢˜æ·»åŠ ID
    headings.forEach((heading, index) => {
      if (!heading.id) {
        heading.id = 'heading-' + index;
      }
    });

    // ç”Ÿæˆç›®å½•HTML
    let tocHTML = '<ul class="toc-list">';
    headings.forEach((heading) => {
      const level = heading.tagName === 'H2' ? 'toc-level-1' : 'toc-level-2';
      tocHTML += `
        <li class="${level}">
          <a href="#${heading.id}" class="toc-link">${heading.textContent}</a>
        </li>
      `;
    });
    tocHTML += '</ul>';

    // åŒæ—¶æ›´æ–°æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ç›®å½•
    tocNav.innerHTML = tocHTML;
    if (mobileTocNav) {
      mobileTocNav.innerHTML = tocHTML;
    }

    // ç§»åŠ¨ç«¯ç›®å½•æŠ˜å åŠŸèƒ½
    if (mobileTocBtn && mobileTocContent) {
      mobileTocBtn.addEventListener('click', function() {
        const isOpen = mobileTocContent.classList.toggle('open');
        const arrow = this.querySelector('.toc-arrow');
        arrow.textContent = isOpen ? 'â–²' : 'â–¼';
      });

      // ç‚¹å‡»ç§»åŠ¨ç«¯ç›®å½•é“¾æ¥åè‡ªåŠ¨æŠ˜å 
      const mobileTocLinks = mobileTocNav.querySelectorAll('.toc-link');
      mobileTocLinks.forEach(link => {
        link.addEventListener('click', function() {
          mobileTocContent.classList.remove('open');
          const arrow = mobileTocBtn.querySelector('.toc-arrow');
          arrow.textContent = 'â–¼';
        });
      });
    }

    // å¹³æ»‘æ»šåŠ¨ï¼ˆæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯é€šç”¨ï¼‰
    const allTocLinks = document.querySelectorAll('.toc-link');
    allTocLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        if (targetElement) {
          targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
          // æ›´æ–°URLä½†ä¸æ»šåŠ¨
          history.pushState(null, null, '#' + targetId);
        }
      });
    });

    // æ»šåŠ¨é«˜äº®
    let isScrolling = false;

    function highlightTOC() {
      if (isScrolling) return;

      let current = '';
      const scrollPosition = window.scrollY + 100;

      headings.forEach(heading => {
        const headingTop = heading.offsetTop;
        if (scrollPosition >= headingTop) {
          current = heading.id;
        }
      });

      allTocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });
    }

    window.addEventListener('scroll', highlightTOC);
    highlightTOC(); // åˆå§‹åŒ–

    // === ç§»åŠ¨ç«¯åŠŸèƒ½ ===

    // 1. ä»URLè·å–æ¥æºå‚æ•°ï¼Œåˆ¤æ–­æ˜¯å¦ä»çŸ¥è¯†åº“è¿›å…¥
    const urlParams = new URLSearchParams(window.location.search);
    const fromCategory = urlParams.get('from');
    const mobileArticlesBtn = document.getElementById('mobileArticlesBtn');
    const mobileArticlesSidebar = document.getElementById('mobileArticlesSidebar');
    const mobileArticlesOverlay = document.getElementById('mobileArticlesOverlay');
    const mobileArticlesClose = document.getElementById('mobileArticlesClose');
    const mobileArticlesList = document.getElementById('mobileArticlesList');
    const mobileArticlesCategory = document.getElementById('mobileArticlesCategory');

    // å¦‚æœæ˜¯ä»çŸ¥è¯†åº“è¿›å…¥ï¼ˆæœ‰fromå‚æ•°ï¼‰ï¼Œæ˜¾ç¤ºæ–‡ç« åˆ—è¡¨æŒ‰é’®
    if (fromCategory && mobileArticlesBtn) {
      mobileArticlesBtn.style.display = 'flex';

      // åŠ è½½è¯¥åˆ†ç±»çš„æ‰€æœ‰æ–‡ç« 
      fetch('/docs.html')
        .then(response => response.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const docsDataScript = doc.getElementById('docs-data');
          if (docsDataScript) {
            const docsData = JSON.parse(docsDataScript.textContent);
            const categoryDocs = docsData[fromCategory] || [];

            // æ›´æ–°åˆ†ç±»æ ‡é¢˜
            mobileArticlesCategory.textContent = fromCategory;

            // ç”Ÿæˆæ–‡ç« åˆ—è¡¨
            let html = '';
            categoryDocs.forEach(doc => {
              const isActive = window.location.pathname === doc.url ? 'active' : '';
              html += `<li><a href="${doc.url}?from=${encodeURIComponent(fromCategory)}" class="${isActive}">${doc.title}</a></li>`;
            });
            mobileArticlesList.innerHTML = html || '<li style="padding: 14px; color: #999;">æš‚æ— æ–‡æ¡£</li>';
          }
        })
        .catch(error => console.error('åŠ è½½æ–‡ç« åˆ—è¡¨å¤±è´¥:', error));

      // ç‚¹å‡»æŒ‰é’®æ‰“å¼€ä¾§è¾¹æ 
      mobileArticlesBtn.addEventListener('click', function() {
        mobileArticlesSidebar.classList.add('open');
        mobileArticlesOverlay.classList.add('show');
        document.body.style.overflow = 'hidden';
      });

      // å…³é—­ä¾§è¾¹æ 
      function closeMobileArticles() {
        mobileArticlesSidebar.classList.remove('open');
        mobileArticlesOverlay.classList.remove('show');
        document.body.style.overflow = '';
      }

      mobileArticlesClose.addEventListener('click', closeMobileArticles);
      mobileArticlesOverlay.addEventListener('click', closeMobileArticles);
    }

    // 2. ç§»åŠ¨ç«¯æ‚¬æµ®ç›®å½•æŒ‰é’®
    const mobileFloatingTocBtn = document.getElementById('mobileFloatingTocBtn');
    const mobileBottomToc = document.getElementById('mobileBottomToc');
    const mobileBottomTocOverlay = document.getElementById('mobileBottomTocOverlay');
    const mobileBottomTocClose = document.getElementById('mobileBottomTocClose');
    const mobileBottomTocNav = document.getElementById('mobileBottomTocNav');

    // å¤åˆ¶ç›®å½•HTMLåˆ°åº•éƒ¨å¼¹å‡ºç›®å½•
    if (mobileBottomTocNav && tocHTML) {
      mobileBottomTocNav.innerHTML = tocHTML;
    }

    // æ‰“å¼€åº•éƒ¨ç›®å½•
    if (mobileFloatingTocBtn) {
      mobileFloatingTocBtn.addEventListener('click', function() {
        mobileBottomToc.classList.add('open');
        mobileBottomTocOverlay.classList.add('show');
        document.body.style.overflow = 'hidden';
      });
    }

    // å…³é—­åº•éƒ¨ç›®å½•
    function closeMobileBottomToc() {
      mobileBottomToc.classList.remove('open');
      mobileBottomTocOverlay.classList.remove('show');
      document.body.style.overflow = '';
    }

    if (mobileBottomTocClose) {
      mobileBottomTocClose.addEventListener('click', closeMobileBottomToc);
    }

    if (mobileBottomTocOverlay) {
      mobileBottomTocOverlay.addEventListener('click', closeMobileBottomToc);
    }

    // ç‚¹å‡»åº•éƒ¨ç›®å½•é“¾æ¥åè·³è½¬å¹¶å…³é—­
    const mobileBottomTocLinks = mobileBottomTocNav.querySelectorAll('.toc-link');
    mobileBottomTocLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);

        // å…ˆå…³é—­ç›®å½•
        closeMobileBottomToc();

        // å»¶è¿Ÿä¸€ç‚¹è·³è½¬ï¼Œè®©å…³é—­åŠ¨ç”»å®Œæˆ
        setTimeout(() => {
          if (targetElement) {
            targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            history.pushState(null, null, '#' + targetId);
          }
        }, 300);
      });
    });

    // åŒæ­¥åº•éƒ¨ç›®å½•çš„é«˜äº®çŠ¶æ€
    function highlightBottomTOC() {
      if (!mobileBottomTocLinks.length) return;

      let current = '';
      const scrollPosition = window.scrollY + 100;

      headings.forEach(heading => {
        const headingTop = heading.offsetTop;
        if (scrollPosition >= headingTop) {
          current = heading.id;
        }
      });

      mobileBottomTocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });
    }

    window.addEventListener('scroll', highlightBottomTOC);
    highlightBottomTOC(); // åˆå§‹åŒ–

    // === MDæºç /æ¸²æŸ“è§†å›¾åˆ‡æ¢åŠŸèƒ½ ===
    const viewModeBtn = document.getElementById('viewModeBtn');
    const docContent = document.getElementById('docContent');
    const docSource = document.getElementById('docSource');
    const markdownSource = document.getElementById('markdownSource');

    let isSourceMode = false;
    let rawMarkdown = '';

    // HTMLè½¬Markdown - ä»æ¸²æŸ“çš„HTMLåè§£ææˆMarkdown
    function htmlToMarkdown(element) {
      let markdown = '';
      const nodes = element.childNodes;

      nodes.forEach(node => {
        if (node.nodeType === Node.TEXT_NODE) {
          // æ–‡æœ¬èŠ‚ç‚¹ç›´æ¥æ·»åŠ 
          markdown += node.textContent;
        } else if (node.nodeType === Node.ELEMENT_NODE) {
          const tag = node.tagName.toLowerCase();

          switch(tag) {
            case 'h1':
              markdown += '# ' + node.textContent.trim() + '\n\n';
              break;
            case 'h2':
              markdown += '## ' + node.textContent.trim() + '\n\n';
              break;
            case 'h3':
              markdown += '### ' + node.textContent.trim() + '\n\n';
              break;
            case 'h4':
              markdown += '#### ' + node.textContent.trim() + '\n\n';
              break;
            case 'h5':
              markdown += '##### ' + node.textContent.trim() + '\n\n';
              break;
            case 'h6':
              markdown += '###### ' + node.textContent.trim() + '\n\n';
              break;
            case 'p':
              markdown += htmlToMarkdown(node) + '\n\n';
              break;
            case 'strong':
            case 'b':
              markdown += '**' + node.textContent + '**';
              break;
            case 'em':
            case 'i':
              markdown += '*' + node.textContent + '*';
              break;
            case 'code':
              // æ£€æŸ¥æ˜¯å¦åœ¨preä¸­ï¼ˆä»£ç å—ï¼‰
              if (node.parentElement.tagName.toLowerCase() !== 'pre') {
                markdown += '`' + node.textContent + '`';
              }
              break;
            case 'pre':
              const codeNode = node.querySelector('code');
              if (codeNode) {
                const codeText = codeNode.textContent;
                const langMatch = codeNode.className.match(/language-(\w+)/);
                const lang = langMatch ? langMatch[1] : '';
                markdown += '```' + lang + '\n' + codeText + '\n```\n\n';
              } else {
                markdown += '```\n' + node.textContent + '\n```\n\n';
              }
              break;
            case 'a':
              const href = node.getAttribute('href') || '';
              markdown += '[' + node.textContent + '](' + href + ')';
              break;
            case 'img':
              const src = node.getAttribute('src') || '';
              const alt = node.getAttribute('alt') || '';
              markdown += '![' + alt + '](' + src + ')';
              break;
            case 'ul':
              node.querySelectorAll('li').forEach(li => {
                markdown += '- ' + htmlToMarkdown(li).trim() + '\n';
              });
              markdown += '\n';
              break;
            case 'ol':
              node.querySelectorAll('li').forEach((li, index) => {
                markdown += (index + 1) + '. ' + htmlToMarkdown(li).trim() + '\n';
              });
              markdown += '\n';
              break;
            case 'li':
              // å·²åœ¨ul/olä¸­å¤„ç†ï¼Œè¿™é‡Œç›´æ¥è¿”å›å†…å®¹
              return htmlToMarkdown(node);
            case 'blockquote':
              const quoteLines = htmlToMarkdown(node).trim().split('\n');
              quoteLines.forEach(line => {
                markdown += '> ' + line + '\n';
              });
              markdown += '\n';
              break;
            case 'hr':
              markdown += '---\n\n';
              break;
            case 'table':
              markdown += convertTableToMarkdown(node) + '\n\n';
              break;
            case 'br':
              markdown += '  \n';
              break;
            case 'div':
            case 'span':
              // å®¹å™¨å…ƒç´ ï¼Œé€’å½’å¤„ç†å­å…ƒç´ 
              markdown += htmlToMarkdown(node);
              break;
            default:
              // å…¶ä»–å…ƒç´ é€’å½’å¤„ç†
              markdown += htmlToMarkdown(node);
          }
        }
      });

      return markdown;
    }

    // è¡¨æ ¼è½¬Markdown
    function convertTableToMarkdown(table) {
      let markdown = '';
      const rows = table.querySelectorAll('tr');

      rows.forEach((row, rowIndex) => {
        const cells = row.querySelectorAll('th, td');
        const cellTexts = Array.from(cells).map(cell => cell.textContent.trim());

        markdown += '| ' + cellTexts.join(' | ') + ' |\n';

        // åœ¨è¡¨å¤´åæ·»åŠ åˆ†éš”è¡Œ
        if (rowIndex === 0) {
          markdown += '| ' + cellTexts.map(() => '---').join(' | ') + ' |\n';
        }
      });

      return markdown;
    }

    // ç”ŸæˆMarkdownæºç 
    function generateMarkdownSource() {
      if (rawMarkdown) return; // å·²ç”Ÿæˆè¿‡

      try {
        // ä»é¡µé¢ä¿¡æ¯ç”ŸæˆFront Matter
        const frontMatter = `---
layout: doc
title: {{ page.title }}
category: {{ page.category }}
date: {{ page.date | date: "%Y-%m-%d" }}
{% if page.tags %}tags:
{% for tag in page.tags %}  - {{ tag }}
{% endfor %}{% endif %}---

`;

        // ä»HTMLå†…å®¹è½¬æ¢ä¸ºMarkdown
        const contentMarkdown = htmlToMarkdown(docContent);

        rawMarkdown = frontMatter + contentMarkdown;
        markdownSource.textContent = rawMarkdown;
      } catch (error) {
        console.error('ç”ŸæˆMarkdownæºç å¤±è´¥:', error);
        markdownSource.textContent = 'ç”ŸæˆMarkdownæºç å¤±è´¥: ' + error.message;
      }
    }

    // åˆ‡æ¢è§†å›¾æ¨¡å¼
    if (viewModeBtn) {
      viewModeBtn.addEventListener('click', function() {
        isSourceMode = !isSourceMode;

        if (isSourceMode) {
          // åˆ‡æ¢åˆ°æºç æ¨¡å¼
          generateMarkdownSource();
          docContent.style.display = 'none';
          docSource.style.display = 'block';
          this.querySelector('.mode-icon').textContent = 'ğŸ‘ï¸';
          this.title = 'æŸ¥çœ‹æ¸²æŸ“';
        } else {
          // åˆ‡æ¢å›æ¸²æŸ“æ¨¡å¼
          docContent.style.display = 'block';
          docSource.style.display = 'none';
          this.querySelector('.mode-icon').textContent = 'ğŸª„';
          this.title = 'æŸ¥çœ‹æºç ';
        }
      });

      // åˆå§‹åŒ–tooltip
      viewModeBtn.title = 'æŸ¥çœ‹æºç ';
    }

    // å¤åˆ¶Markdownæºç åŠŸèƒ½
    const copyMarkdownBtn = document.getElementById('copyMarkdownBtn');
    if (copyMarkdownBtn) {
      copyMarkdownBtn.addEventListener('click', async function() {
        const sourceText = markdownSource.textContent;

        try {
          await navigator.clipboard.writeText(sourceText);

          // æ˜¾ç¤ºæˆåŠŸåé¦ˆ
          const originalText = this.querySelector('.copy-text').textContent;
          this.querySelector('.copy-text').textContent = 'å·²å¤åˆ¶!';
          this.querySelector('.copy-icon').textContent = 'âœ…';
          this.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';

          // 2ç§’åæ¢å¤
          setTimeout(() => {
            this.querySelector('.copy-text').textContent = originalText;
            this.querySelector('.copy-icon').textContent = 'ğŸ“‹';
            this.style.background = '';
          }, 2000);
        } catch (error) {
          // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨æ—§çš„ execCommand
          const textArea = document.createElement('textarea');
          textArea.value = sourceText;
          textArea.style.position = 'fixed';
          textArea.style.left = '-9999px';
          document.body.appendChild(textArea);
          textArea.select();

          try {
            document.execCommand('copy');
            this.querySelector('.copy-text').textContent = 'å·²å¤åˆ¶!';
            this.querySelector('.copy-icon').textContent = 'âœ…';
            this.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';

            setTimeout(() => {
              this.querySelector('.copy-text').textContent = 'å¤åˆ¶æºç ';
              this.querySelector('.copy-icon').textContent = 'ğŸ“‹';
              this.style.background = '';
            }, 2000);
          } catch (err) {
            alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å¤åˆ¶');
          }

          document.body.removeChild(textArea);
        }
      });
    }
  });
</script>
